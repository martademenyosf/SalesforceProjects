<!-- sldsValidatorIgnore -->
<template>
    <lightning-card title="Get not closed cases" icon-name="standard:case">
        <div class="slds-m-around_medium">
            <p class="slds-m-bottom_small">
                <lightning-button label="Load Cases" onclick={handleLoadCases}></lightning-button>
            </p>    
            <!--  Case table -->
            <template if:true={cases}>
                <lightning-datatable
                    key-field="Id"
                    data={cases}
                    columns={caseColumns}
                    hide-checkbox-column="true"
                >
                </lightning-datatable>   
            </template>       
            <template if:true={error}>
            <!--c-error-panel errors={error}></c-error-panel-->
            </template>
        </div>
    </lightning-card>    
    <lightning-card title="Create New Case" icon-name="custom:custom14">  
      <!-- Create new Case -->
      <div class="slds-m-around_medium">

        <template if:true={customFields}>
            <lightning-record-edit-form object-api-name="Case" onsuccess={handleCaseCreated} onerror={handleCaseCreatedError} onsubmit={handleSubmit}>
                <lightning-messages></lightning-messages>
               
               <template for:each={customFields} for:item="customField">
                        <lightning-input-field field-name={customField.Field_Api_Name__c} value={customField.Default_Value__c} 
                                                    readonly={customField.isReadOnly__c} key={customField.Id}></lightning-input-field>
                </template>
                <lightning-input-field field-name="OwnerId" value={userId}></lightning-input-field>

               <lightning-button
                    class="slds-m-top_small"
                    variant="brand"
                    type="submit"
                    label="Create Case"
                ></lightning-button>
            </lightning-record-edit-form>
        </template>       
        <template if:true={error}>
            <!--c-error-panel errors={error}></c-error-panel-->
        </template>      
      </div>
    </lightning-card>    
</template>